<!-- Copyright (c) 2025 The Brave Authors. All rights reserved.
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this file,
You can obtain one at https://mozilla.org/MPL/2.0/. -->

<style include="settings-shared md-select">
  .header {
    padding: var(--leo-spacing-2xl) var(--leo-spacing-2xl) 0 var(--leo-spacing-2xl);
  }

  .main-header {
    font: var(--leo-font-heading-h4);
  }

  .description {
    font: var(--leo-font-default-regular);
    color: var(--leo-color-text-secondary);
    margin-top: var(--leo-spacing-m);
  }
  .leo-customization-form {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--leo-spacing-2xl);
    align-self: stretch;
    padding: var(--leo-spacing-m) var(--leo-spacing-2xl) 0 var(--leo-spacing-2xl);
  }
  .leo-customization-form .actions {
    display: flex;
    flex-direction: row;
    padding: 0 0 var(--leo-spacing-xl) 0;
  }
  .leo-customization-form leo-input {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--leo-spacing-s);
    align-self: stretch;
    width: 100%;
    display: block;
  }
  .label-text {
    margin-bottom: var(--leo-spacing-s);
    font-weight: 600;
  }
  settings-toggle-button {
    padding: var(--leo-spacing-l) var(--leo-spacing-2xl);
  }
  .error-message {
    --leo-icon-color: var(--leo-color-systemfeedback-error-icon);

    display: flex;
    align-items: center;
    gap: var(--leo-spacing-s);
    color: var(--leo-color-systemfeedback-error-text);
    font: var(--leo-font-small-regular);
  }
</style>

<settings-section section="customization">
<div class="settings-box header">
  <div class="flex">
    <div class="main-header">$i18n{braveLeoAssistantCustomizationTitle}</div>
    <div class="label secondary">
      <span>$i18nRaw{braveLeoAssistantCustomizationDescription}</span>
    </div>
  </div>
</div>

<settings-toggle-button
    icon="tune"
    pref="{{prefs.brave.ai_chat.user_customization_enabled}}"
    label="$i18n{braveLeoAssistantCustomizationEnabledLabel}">
</settings-toggle-button>

<template is="dom-if" if="[[prefs.brave.ai_chat.user_customization_enabled.value]]" restamp>
  <div class="leo-customization-form">
    <leo-input
      placeholder="$i18n{braveLeoAssistantCustomizationNamePlaceholder}"
      value="[[nameInput_]]" on-input="onNameInputChanged_"
      showErrors$="[[isTooLong(nameInput_)]]">
      <span class="label-text">$i18n{braveLeoAssistantCustomizationNameLabel}</span>
      <div slot="errors" class="error-message" hidden$="[[!isTooLong(nameInput_)]]">
        <leo-icon name="warning-triangle-filled"></leo-icon>
        <span>$i18n{braveLeoAssistantInputLengthError}</span>
      </div>
    </leo-input>
    <leo-input
      placeholder="$i18n{braveLeoAssistantCustomizationJobPlaceholder}"
      value="[[jobInput_]]" on-input="onJobInputChanged_"
      showErrors$="[[isTooLong(jobInput_)]]">
      <span class="label-text">$i18n{braveLeoAssistantCustomizationJobLabel}</span>
      <div slot="errors" class="error-message" hidden$="[[!isTooLong(jobInput_)]]">
        <leo-icon name="warning-triangle-filled"></leo-icon>
        <span>$i18n{braveLeoAssistantInputLengthError}</span>
      </div>
    </leo-input>
    <leo-input
      placeholder="$i18n{braveLeoAssistantCustomizationTonePlaceholder}"
      value="[[toneInput_]]" on-input="onToneInputChanged_"
      showErrors$="[[isTooLong(toneInput_)]]">
      <span class="label-text">$i18n{braveLeoAssistantCustomizationToneLabel}</span>
      <div slot="errors" class="error-message" hidden$="[[!isTooLong(toneInput_)]]">
        <leo-icon name="warning-triangle-filled"></leo-icon>
        <span>$i18n{braveLeoAssistantInputLengthError}</span>
      </div>
    </leo-input>
    <leo-input
      placeholder="$i18n{braveLeoAssistantCustomizationOtherPlaceholder}"
      value="[[otherInput_]]" on-input="onOtherInputChanged_"
      showErrors$="[[isTooLong(otherInput_)]]">
      <span class="label-text">$i18n{braveLeoAssistantCustomizationOtherLabel}</span>
      <div slot="errors" class="error-message" hidden$="[[!isTooLong(otherInput_)]]">
        <leo-icon name="warning-triangle-filled"></leo-icon>
        <span>$i18n{braveLeoAssistantInputLengthError}</span>
      </div>
    </leo-input>
    <div class="actions">
      <leo-button
        kind="outline"
        on-click="onSave"
        isDisabled$="[[isSaveDisabled_]]"
      >
        [[getSaveButtonText_(changesSaved_)]]
        <template is="dom-if" if="[[changesSaved_]]" restamp>
          <leo-icon name="check-circle-outline" slot="icon-after"></leo-icon>
        </template>
      </leo-button>
    </div>
  </div>
</template>
</settings-section>

<settings-section section="memories">
  <memory-section prefs="{{prefs}}"></memory-section>
</settings-section>
