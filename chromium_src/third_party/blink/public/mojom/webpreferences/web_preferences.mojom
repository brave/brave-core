// Copyright (c) 2022 The Brave Authors. All rights reserved.
// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this file,
// You can obtain one at http://mozilla.org/MPL/2.0/.

module blink.mojom;

[BraveExtend]
struct WebPreferences {
  // If |force_cosmetic_filters| is true, cosmetic filters will be applied to
  // regardless of contents settings. This is used for Playlist so that it can
  // remove ads from the page.
  bool force_cosmetic_filtering;

  // If |hide_media_src_api| is true, PlaylistRenderFrameObserver will hide
  // the media source API from the page. This is used by Playlist so that
  // it can get downloadable media urls instead of blob url.
  bool hide_media_src_api;

  // If |should_detect_media_files| is true, PlaylistRenderFrameObserver will
  // try to inject JavaScript to detect <video> and <audio> tag, that are
  // dynamically attached.
  bool should_detect_media_files;

  // A map containing JavaScript code to detect media items on websites.
  // The keys are URLs of sites serialized using net::SchemefulSite::Serialize()
  // and can be deserialized with net::SchemefulSite::Deserialize(). Note that
  // the default script is located at an empty string key.
  map<string, string> url_and_media_detection_scripts;

  // Indicates that we can run the media detection script on the main world.
  // Sometimes we need to run the script in the main world to get metadata of
  // media items from javascript object. At the moment this can be true only on
  // Android.
  bool allow_to_run_script_on_main_world;
};
