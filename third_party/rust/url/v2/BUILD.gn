# Copyright 2023 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/rust/cargo_crate.gni")

group("lib") {
  public_deps = [ ":url_rust" ]
  deps = [ ":url_cpp" ]
}

rust_static_library("url_rust") {
  visibility = [ ":*" ]
  crate_name = "url"
  crate_root = "crate/src/lib.rs"
  allow_unsafe = true
  sources = [ "crate/src/lib.rs" ]
  cxx_bindings = [ "crate/src/lib.rs" ]
}

static_library("url_cpp") {
  visibility = [ ":*" ]
  sources = [
    "crate/parse.cc",
    "crate/parse.h",
  ]

  deps = [
    ":url_rust",
    "//base:i18n",
    "//url",
  ]
}
