# Copyright (c) 2021 The Brave Authors. All rights reserved.
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this file,
# You can obtain one at http://mozilla.org/MPL/2.0/. */

import("//brave/build/config.gni")
import("//build/config/sanitizers/sanitizers.gni")
import("//testing/test.gni")

source_set("bat_native_ledger_tests") {
  testonly = true

  sources = [
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/bitflyer/bitflyer_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/contribution/contribution_monthly_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/contribution/contribution_unblinded_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/async_result_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/bat_ledger_context_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/bat_ledger_task_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/bat_ledger_test.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/bat_ledger_test.h",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/test_ledger_client.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/test_ledger_client.h",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/core/test_ledger_client_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/credentials/credentials_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_activity_info_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_balance_report_info_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_migration_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_mock.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_mock.h",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_publisher_prefix_list_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/database/database_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/api/api_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/api/get_parameters/get_parameters_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/bitflyer/bitflyer_utils_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/bitflyer/get_balance/get_balance_bitflyer_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/bitflyer/post_claim/post_claim_bitflyer_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/bitflyer/post_oauth/post_oauth_bitflyer_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/bitflyer/post_transaction/post_transaction_bitflyer_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/get_credentials/get_credentials_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/payment_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/post_credentials/post_credentials_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/post_order/post_order_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/post_transaction_anon/post_transaction_anon_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/post_transaction_uphold/post_transaction_uphold_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/payment/post_votes/post_votes_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/private_cdn/get_publisher/get_publisher_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/private_cdn/private_cdn_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/get_available/get_available_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/get_captcha/get_captcha_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/get_recover_wallet/get_recover_wallet_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/get_signed_creds/get_signed_creds_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/get_wallet_balance/get_wallet_balance_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_bat_loss/post_bat_loss_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_captcha/post_captcha_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_claim_brave/post_claim_brave_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_claim_uphold/post_claim_uphold_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_clobbered_claims/post_clobbered_claims_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_creds/post_creds_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_devicecheck/post_devicecheck_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_safetynet/post_safetynet_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_suggestions/post_suggestions_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_suggestions_claim/post_suggestions_claim_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/post_wallet_brave/post_wallet_brave_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/promotions_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/put_captcha/put_captcha_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/put_devicecheck/put_devicecheck_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/promotion/put_safetynet/put_safetynet_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/rewards/get_prefix_list/get_prefix_list_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/rewards/rewards_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/get_card/get_card_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/get_cards/get_cards_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/get_me/get_me_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/patch_card/patch_card_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/post_cards/post_cards_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/post_oauth/post_oauth_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/post_transaction/post_transaction_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/post_transaction_commit/post_transaction_commit_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/endpoint/uphold/uphold_utils_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/ledger_client_mock.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/ledger_client_mock.h",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/ledger_impl_mock.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/ledger_impl_mock.h",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/bat_helper_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/bat_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/client_state_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/github_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/helper_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/reddit_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/vimeo_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/youtube_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/publisher_settings_state_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/report_balance_state_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/wallet_info_state_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/logging/logging_util_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/promotion/promotion_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/publisher/prefix_list_reader_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/publisher/publisher_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/uphold/uphold_unittest.cc",
    "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/uphold/uphold_util_unittest.cc",
  ]

  if (!is_asan) {
    # Move sources out of the !is_asan block when
    # https://github.com/brave/brave-browser/issues/11893 is fixed
    sources += [ "//brave/vendor/bat-native-ledger/src/bat/ledger/internal/legacy/media/twitch_unittest.cc" ]
  }

  deps = [
    "//base/test:test_support",
    "//brave/components/challenge_bypass_ristretto",
    "//brave/vendor/bat-native-ledger",
    "//brave/vendor/bat-native-ledger:publishers_proto",
    "//brave/vendor/bat-native-rapidjson",
    "//net:net",
    "//sql:sql",
    "//url:url",
  ]

  data = [ "data/" ]

  configs += [ "//brave/vendor/bat-native-ledger:internal_config" ]
}
