diff --git a/chrome/installer/mini_installer/configuration.cc b/chrome/installer/mini_installer/configuration.cc
index f247568ff033121f2aeb6d66c505a514e392b9a6..e94eb13bf7d2f8a1ecd6acfa9a77538eb8ad5de3 100644
--- a/chrome/installer/mini_installer/configuration.cc
+++ b/chrome/installer/mini_installer/configuration.cc
@@ -30,7 +30,11 @@ namespace {
 bool GetGoogleUpdateIsMachineEnvVar() {
   const DWORD kBufferSize = 2;
   StackString<kBufferSize> value;
+#if defined(OFFICIAL_BUILD)
+  DWORD length = ::GetEnvironmentVariableW(L"BraveSoftwareUpdateIsMachine",
+#else
   DWORD length = ::GetEnvironmentVariableW(L"GoogleUpdateIsMachine",
+#endif
                                            value.get(), kBufferSize);
   return length == 1 && *value.get() == L'1';
 }
@@ -45,8 +49,9 @@ Configuration::~Configuration() {
   Clear();
 }
 
-bool Configuration::Initialize() {
+bool Configuration::Initialize(HMODULE module) {
   Clear();
+  ReadResources(module);
   ReadRegistry();
   return ParseCommandLine(::GetCommandLine());
 }
@@ -66,6 +71,7 @@ void Configuration::Clear() {
   is_system_level_ = false;
   has_invalid_switch_ = false;
   should_delete_extracted_files_ = true;
+  previous_version_ = nullptr;
 }
 
 // |command_line| is shared with this instance in the sense that this
@@ -80,7 +86,9 @@ bool Configuration::ParseCommandLine(const wchar_t* command_line) {
   for (int i = 1; i < argument_count_; ++i) {
     if (0 == ::lstrcmpi(args_[i], L"--system-level"))
       is_system_level_ = true;
-#if BUILDFLAG(GOOGLE_CHROME_BRANDING)
+#if BUILDFLAG(GOOGLE_CHROME_BRANDING) || defined(OFFICIAL_BUILD)
+    // Use original install switch because it isn't visible to user.
+    // Sync this switch with brave/.../chromium_install_modes.cc
     else if (0 == ::lstrcmpi(args_[i], L"--chrome-beta"))
       chrome_app_guid_ = google_update::kBetaAppGuid;
     else if (0 == ::lstrcmpi(args_[i], L"--chrome-dev"))
@@ -100,6 +108,35 @@ bool Configuration::ParseCommandLine(const wchar_t* command_line) {
   return true;
 }
 
+void Configuration::ReadResources(HMODULE module) {
+  HRSRC resource_info_block =
+      FindResource(module, MAKEINTRESOURCE(ID_PREVIOUS_VERSION), RT_RCDATA);
+  if (!resource_info_block)
+    return;
+
+  HGLOBAL data_handle = LoadResource(module, resource_info_block);
+  if (!data_handle)
+    return;
+
+  // The data is a Unicode string, so it must be a multiple of two bytes.
+  DWORD version_size = SizeofResource(module, resource_info_block);
+  if (!version_size || (version_size & 0x01) != 0)
+    return;
+
+  void* version_data = LockResource(data_handle);
+  if (!version_data)
+    return;
+
+  const wchar_t* version_string = reinterpret_cast<wchar_t*>(version_data);
+  size_t version_len = version_size / sizeof(wchar_t);
+
+  // The string must be terminated.
+  if (version_string[version_len - 1])
+    return;
+
+  previous_version_ = version_string;
+}
+
 void Configuration::ReadRegistry() {
   // Extracted files should not be deleted iff the user has manually created a
   // ChromeInstallerCleanup string value in the registry under
