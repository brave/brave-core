diff --git a/tools/crates/gnrt/lib/deps.rs b/tools/crates/gnrt/lib/deps.rs
index 01a0a65b1efe49b84b9ab40a58968e661f5e25ca..1db19cf924b8f586ec9a9c4c48266c1f692a6cbf 100644
--- a/tools/crates/gnrt/lib/deps.rs
+++ b/tools/crates/gnrt/lib/deps.rs
@@ -263,6 +263,7 @@ pub fn collect_dependencies(
     let mut packages = package_set
         .packages(DependencyDirection::Forward)
         .filter(|package| package.name() != root_package_name)
+        .filter(|package| package.source().is_external())
         .map(|package| {
             let err_context = || format!("Error processing `{}`", package.name());
             let dependencies = get_package_dependencies(&package, |link| {
@@ -355,6 +356,7 @@ impl<'g> guppy::graph::PackageResolver<'g> for PackageResolver<'_> {
         if self.extra_config.resolve.remove_crates.contains(link.to().name()) {
             return false;
         }
+
         let remove_deps =
             self.extra_config.get_combined_set(link.from().name(), |cfg| &cfg.remove_deps);
         if remove_deps.contains(link.to().name()) {
