diff --git a/tools/grit/preprocess_if_expr.py b/tools/grit/preprocess_if_expr.py
index 35c1b20bc2c83..bd6f537534a1e 100644
--- a/tools/grit/preprocess_if_expr.py
+++ b/tools/grit/preprocess_if_expr.py
@@ -93,6 +93,7 @@ def main(argv):
 
   for input_file in args.in_files:
     in_path = os.path.join(in_folder, input_file)
+  def process_file(in_path, input_file):
     content = ""
     with open(in_path, encoding='utf-8') as f:
       content = f.read()
@@ -149,5 +150,6 @@ def main(argv):
   return
 
 
+from brave_chromium_utils import inline_chromium_src_override; inline_chromium_src_override(globals(), locals())
 if __name__ == '__main__':
   main(sys.argv[1:])
