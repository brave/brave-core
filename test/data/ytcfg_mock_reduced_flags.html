<html>
<head>
    <title>OK</title>
    <script>
    // Backup the original `replace` method.
    const originalReplace = String.prototype.replace;

    // Add a counter to track the number of times `replace` is called.
    let replaceCallCount = 0;

    // Override `String.prototype.replace`.
    String.prototype.replace = function (...args) {
      // Increment the counter.
      replaceCallCount++;

      // Call the original `replace` method and return the result.
      return originalReplace.apply(this, args);
    };

    // Function to get the current replace call count.
    window.getReplaceCallCount = function () {
      return replaceCallCount;
    };

    // Mock `window.ytcfg` object without the following flags
    // html5_picture_in_picture_blocking_document_fullscreen=true&
    // html5_picture_in_picture_blocking_standard_api=true&
    // html5_picture_in_picture_logging_onresize=true&
    window.ytcfg = {
      data_: {
        WEB_PLAYER_CONTEXT_CONFIGS: {
          WEB_PLAYER_CONTEXT_CONFIG_ID_MWEB_WATCH: {
            serializedExperimentFlags: `
              html5_picture_in_picture_blocking_ontimeupdate=true&
              html5_picture_in_picture_blocking_onresize=true&
              another_flag_for_testing=true
            `
          }
        }
      },
      get(key) {
        // Allow access to keys via a simple getter.
        return this.data_[key];
      }
    };
    </script>
</head>
<body></body>
</html>
